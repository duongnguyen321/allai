const e=new showdown.Converter;let t,o,n=!1;const l=document.getElementById("submit-button"),s=document.getElementById("regenerate-response-button"),a=document.getElementById("prompt-input"),i=document.getElementById("model-select"),r=document.getElementById("response-list"),c=(e,t)=>{const o=`id-${Date.now()}-${Math.random().toString(16)}`,n=`\n    <div class="response-container ${e?"my-question":"chatgpt-response"}">\n      <img class="avatar-image" src="assets/img/${e?"me":"chatgpt"}.png" alt="avatar"/>\n      <div class="prompt-content" id="${o}">${t}</div>\n    </div>\n  `;return r.insertAdjacentHTML("beforeend",n),r.scrollTop=r.scrollHeight,o},d=(e,t)=>{e.innerHTML=t,e.style.color="rgb(200, 0, 0)"};async function g(t,o){const s=t||a.textContent;if(n||!s)return;l.classList.add("loading"),a.textContent="",o||c(!0,`<div>${s}</div>`);const g=o||c(!1,""),m=document.getElementById(g);n=!0;let p=0,u=!0;const v=setInterval((()=>{u?(m.textContent+=".",p++,4===p&&(u=!1)):(m.textContent=m.textContent.slice(0,-1),p--,0===p&&(u=!0))}),300);try{const t=i.value,o=await fetch("/api/get-prompt-result",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:s,model:t})});if("invalid_request_error"===o.type)return void d(m,`HTTP Error: ${await o.text()}`);clearInterval(v),m.innerHTML=e.makeHtml(await o.text()),r.scrollTop=r.scrollHeight,hljs.highlightAll()}catch(e){d(m,`Error: ${e.message}`)}finally{n=!1,l.classList.remove("loading")}}a.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),e.ctrlKey||e.shiftKey?document.execCommand("insertHTML",!1,"<br/><br/>"):g())})),l.addEventListener("click",(()=>{g()})),s.addEventListener("click",(()=>{!async function(){try{await g(t,o),s.classList.add("loading")}finally{s.classList.remove("loading")}}()})),window.onload=function(){(!localStorage.isVisited||localStorage.visitedTime>=5)&&(confirm("Please Give me a shining star ‚ú¥Ô∏è")||alert("Please give me a star to use ü§ó"),open("https://github.com/duongnguyen321/allai","_blank"),localStorage.isVisited=!0,localStorage.visitedTime=0),console.groupCollapsed("%cHello From Client side!","color: #20e3b2"),console.log("%cI am Duong from %chttps://duong.vercel.app%c!","color: #20e3b2","color: #58a6ff","color: #10a37f"),console.groupEnd(),console.groupCollapsed("%cPlease be a responsible user!","color: #f55"),console.log("%cThank you!","color: #20e3b2"),console.groupEnd(),a.focus(),localStorage.visitedTime=JSON.parse(localStorage.visitedTime)+1};